# üöÄ Crypto Portfolio Manager

–°–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–µ –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫—Ä–∏–ø—Ç–æ–ø–æ—Ä—Ç—Ñ–µ–ª–µ–º —Å –∫—Ä–∞—Å–∏–≤—ã–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–º –∏ –º–æ—â–Ω–æ–π –∞–Ω–∞–ª–∏—Ç–∏–∫–æ–π.

## ‚ú® –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- üìä **–û–±–∑–æ—Ä –ø–æ—Ä—Ç—Ñ–µ–ª—è** - –¥–µ—Ç–∞–ª—å–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏ –º–µ—Ç—Ä–∏–∫–∏
- üíº **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–∑–∏—Ü–∏—è–º–∏** - FIFO —Ä–∞—Å—á–µ—Ç, —Ä–µ–∞–ª—å–Ω—ã–µ —Ü–µ–Ω—ã CoinGecko
- üìù **–ñ—É—Ä–Ω–∞–ª —Å–¥–µ–ª–æ–∫** - –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ, —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ, —É–¥–∞–ª–µ–Ω–∏–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π
- üìà **–ê–Ω–∞–ª–∏—Ç–∏–∫–∞** - —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–æ –º–æ–Ω–µ—Ç–∞–º –∏ —Å—Ç—Ä–∞—Ç–µ–≥–∏—è–º
- üì• **–≠–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö** - CSV —ç–∫—Å–ø–æ—Ä—Ç —Å–¥–µ–ª–æ–∫ –∏ –ø–æ–∑–∏—Ü–∏–π
- üé® **–°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π UI** - –∞–¥–∞–ø—Ç–∏–≤–Ω—ã–π –¥–∏–∑–∞–π–Ω —Å –≥—Ä–∞–¥–∏–µ–Ω—Ç–∞–º–∏

## üõ† –£—Å—Ç–∞–Ω–æ–≤–∫–∞

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è
- Python 3.8+
- pip

### –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

1. **–ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π**
```bash
git clone https://github.com/DREDGV/crypto_portfolio_build.git
cd crypto_portfolio_build
```

2. **–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏**
```bash
pip install -r requirements.txt
```

3. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ (–æ—Å–Ω–æ–≤–Ω–æ–π entrypoint)**
```bash
set APP_PORT=8086
python -m app.main_step2
```

–∏–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–∫—Ä–∏–ø—Ç—ã:

```bash
quick_start.bat   # –±—ã—Å—Ç—Ä—ã–π –∑–∞–ø—É—Å–∫ –Ω–∞ 8086
start_app.bat     # –æ—á–∏—Å—Ç–∫–∞ –∫—ç—à–µ–π/pyc + –∑–∞–ø—É—Å–∫
```

4. **–û—Ç–∫—Ä–æ–π—Ç–µ –±—Ä–∞—É–∑–µ—Ä**
```
http://127.0.0.1:8086
```

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
crypto_portfolio_build/
‚îú‚îÄ‚îÄ app/
‚îÇ   ‚îú‚îÄ‚îÄ main_step2.py        # –æ—Å–Ω–æ–≤–Ω–æ–π –∑–∞–ø—É—Å–∫ (–ø–æ—Ä—Ç 8086)
‚îÇ   ‚îú‚îÄ‚îÄ storage/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ db.py            # –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è SQLite
‚îÇ   ‚îú‚îÄ‚îÄ core/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ models.py        # SQLModel –º–æ–¥–µ–ª–∏ (–≤ —Ç.—á. SourceMeta, PriceAlert)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ services.py      # –±—ç–∫–µ–Ω–¥-–ª–æ–≥–∏–∫–∞/—Ä–∞—Å—á–µ—Ç—ã
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ analytics.py     # —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ export_import.py # —ç–∫—Å–ø–æ—Ä—Ç/–∏–º–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ notifications.py # –º–µ–Ω–µ–¥–∂–µ—Ä —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π (–≤—Ä–µ–º–µ–Ω–Ω–æ –æ—Ç–∫–ª—é—á—ë–Ω –≤ UI)
‚îÇ   ‚îú‚îÄ‚îÄ adapters/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ prices.py        # —Ü–µ–Ω—ã + —É–º–Ω–æ–µ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ (TTL, preload)
‚îÇ   ‚îî‚îÄ‚îÄ ui/
‚îÇ       ‚îú‚îÄ‚îÄ pages_step2.py   # –≥–ª–∞–≤–Ω—ã–π UI
‚îÇ       ‚îú‚îÄ‚îÄ analytics_simple.py
‚îÇ       ‚îú‚îÄ‚îÄ cache_monitor.py
‚îÇ       ‚îú‚îÄ‚îÄ export_import.py
‚îÇ       ‚îú‚îÄ‚îÄ about_page_new.py
‚îÇ       ‚îî‚îÄ‚îÄ advanced_analytics.py  # –≥—Ä–∞—Ñ–∏–∫–∏ (Plotly, –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
‚îú‚îÄ‚îÄ requirements.txt         # –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ (Plotly/Pandas –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
‚îú‚îÄ‚îÄ CHANGELOG.md             # –∏—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π
‚îú‚îÄ‚îÄ TODO_ISSUES.md           # –∏–∑–≤–µ—Å—Ç–Ω—ã–µ –∑–∞–¥–∞—á–∏/–¥–æ–ª–≥–∏
‚îú‚îÄ‚îÄ README.md                # –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
‚îú‚îÄ‚îÄ start_app.bat            # —á–∏—Å—Ç—ã–π –∑–∞–ø—É—Å–∫
‚îî‚îÄ‚îÄ quick_start.bat          # –±—ã—Å—Ç—Ä—ã–π –∑–∞–ø—É—Å–∫
```

## üéØ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Å–¥–µ–ª–∫–∏
1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ –≤–∫–ª–∞–¥–∫—É "–°–¥–µ–ª–∫–∏"
2. –ó–∞–ø–æ–ª–Ω–∏—Ç–µ —Ñ–æ—Ä–º—É:
   - **–ú–æ–Ω–µ—Ç–∞**: BTC, ETH, SOL –∏ —Ç.–¥.
   - **–¢–∏–ø**: –ø–æ–∫—É–ø–∫–∞, –ø—Ä–æ–¥–∞–∂–∞, –¥–µ–ø–æ–∑–∏—Ç, –≤—ã–≤–æ–¥
   - **–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ**: –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –º–æ–Ω–µ—Ç
   - **–¶–µ–Ω–∞**: —Ü–µ–Ω–∞ –∑–∞ –º–æ–Ω–µ—Ç—É
   - **–°—Ç—Ä–∞—Ç–µ–≥–∏—è**: long, mid, short, scalp
   - **–ò—Å—Ç–æ—á–Ω–∏–∫**: –±–∏—Ä–∂–∞ –∏–ª–∏ –∫–æ—à–µ–ª–µ–∫
   - **–ó–∞–º–µ—Ç–∫–∏**: –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

### –ü—Ä–æ—Å–º–æ—Ç—Ä –ø–æ–∑–∏—Ü–∏–π
- **–û–±–∑–æ—Ä**: –æ–±—â–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ—Ä—Ç—Ñ–µ–ª—è
- **–ü–æ–∑–∏—Ü–∏–∏**: –¥–µ—Ç–∞–ª—å–Ω—ã–π —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –ø–æ–∑–∏—Ü–∏–π
- **–§–∏–ª—å—Ç—Ä—ã**: –ø–æ –º–æ–Ω–µ—Ç–µ –∏ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏

### –≠–∫—Å–ø–æ—Ä—Ç/–∏–º–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö
- **–≠–∫—Å–ø–æ—Ä—Ç CSV/JSON**: `–≠–∫—Å–ø–æ—Ä—Ç/–ò–º–ø–æ—Ä—Ç` ‚Üí –∫–Ω–æ–ø–∫–∏ —ç–∫—Å–ø–æ—Ä—Ç–∞
- **–ò–º–ø–æ—Ä—Ç CSV/JSON**: drag&drop —Ñ–∞–π–ª–æ–≤ –≤ —Ç–æ–º –∂–µ —Ä–∞–∑–¥–µ–ª–µ

## üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env` –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞:

```env
# –í–∞–ª—é—Ç–∞ –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è (USD, EUR, RUB)
REPORT_CURRENCY=USD

# –ü–æ—Ä—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 8080)
APP_PORT=8080

# –†–µ–∂–∏–º —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ (0/1)
DEV=0
```

### –ò–∑–º–µ–Ω–µ–Ω–∏–µ –≤–∞–ª—é—Ç—ã
–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è USD. –î–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤–∞–ª—é—Ç—ã:
1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ `REPORT_CURRENCY` –≤ `.env`
2. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ

## üìä –†–∞—Å—á–µ—Ç—ã

### FIFO (First In, First Out)
–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –º–µ—Ç–æ–¥ FIFO –¥–ª—è —Ä–∞—Å—á–µ—Ç–∞ –ø–æ–∑–∏—Ü–∏–π:
- –ü–æ–∫—É–ø–∫–∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è –≤ —Ö—Ä–æ–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–æ–º –ø–æ—Ä—è–¥–∫–µ
- –ü—Ä–æ–¥–∞–∂–∏ —Å–ø–∏—Å—ã–≤–∞—é—Ç—Å—è —Å —Å–∞–º—ã—Ö —Å—Ç–∞—Ä—ã—Ö –ø–æ–∫—É–ø–æ–∫
- –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π PnL —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

### –¶–µ–Ω—ã
- –ò—Å—Ç–æ—á–Ω–∏–∫: CoinGecko (+ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—ã: Binance, Kraken, OKX, CoinPaprika, Coinbase, CMC)
- –£–º–Ω–æ–µ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ: —Ä–∞–∑–Ω—ã–µ TTL –ø–æ –º–æ–Ω–µ—Ç–∞–º, –æ—á–∏—Å—Ç–∫–∞ –ø—Ä–æ—Å—Ä–æ—á–µ–Ω–Ω—ã—Ö, –ø—Ä–µ–¥–∑–∞–≥—Ä—É–∑–∫–∞ –ø–æ–ø—É–ª—è—Ä–Ω—ã—Ö
- –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∫—ç—à–∞: –≤–∫–ª–∞–¥–∫–∞ "–ö—ç—à" ‚Üí —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ hit-rate –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ

## üöÄ –ó–∞–ø—É—Å–∫ –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ

1. **–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏**
```bash
pip install -r requirements.txt
```

2. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è**
```bash
export REPORT_CURRENCY=USD
export APP_PORT=8080
export DEV=0
```

3. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ**
```bash
python -m app.main_step2  # –∏–ª–∏ quick_start.bat
```

## üõ† –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–æ–¥–∞
- **–ú–æ–¥–µ–ª–∏** (`app/core/models.py`): SQLModel –º–æ–¥–µ–ª–∏ (Transaction, SourceMeta, PriceAlert)
- **–°–µ—Ä–≤–∏—Å—ã** (`app/core/services.py`): –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞, –∏—Å—Ç–æ—á–Ω–∏–∫–∏, –∞–ª–µ—Ä—Ç—ã
- **–ê–Ω–∞–ª–∏—Ç–∏–∫–∞** (`app/core/analytics.py`, `app/ui/analytics_simple.py`)
- **UI** (`app/ui/pages_step2.py`, `app/ui/about_page_new.py`)
- **–¶–µ–Ω—ã** (`app/adapters/prices.py`): CoinGecko + –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—ã, –∫—ç—à
- **–≠–∫—Å–ø–æ—Ä—Ç/–ò–º–ø–æ—Ä—Ç** (`app/core/export_import.py`, `app/ui/export_import.py`)

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π
1. –î–æ–±–∞–≤—å—Ç–µ –º–æ–¥–µ–ª—å –≤ `app/core/models.py`
2. –°–æ–∑–¥–∞–π—Ç–µ —Å–µ—Ä–≤–∏—Å –≤ `app/core/services.py`
3. –û–±–Ω–æ–≤–∏—Ç–µ UI –≤ `app/ui/pages.py`

## üìù –õ–∏—Ü–µ–Ω–∑–∏—è

MIT License - –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–≤–æ–±–æ–¥–Ω–æ –¥–ª—è –ª–∏—á–Ω—ã—Ö –∏ –∫–æ–º–º–µ—Ä—á–µ—Å–∫–∏—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤.

## ü§ù –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ï—Å–ª–∏ —É –≤–∞—Å –µ—Å—Ç—å –≤–æ–ø—Ä–æ—Å—ã –∏–ª–∏ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è:
1. –°–æ–∑–¥–∞–π—Ç–µ Issue –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏
2. –û–ø–∏—à–∏—Ç–µ –ø—Ä–æ–±–ª–µ–º—É –∏–ª–∏ –∏–¥–µ—é
3. –ü—Ä–∏–ª–æ–∂–∏—Ç–µ –ª–æ–≥–∏ –æ—à–∏–±–æ–∫ (–µ—Å–ª–∏ –µ—Å—Ç—å)

---

**–°–¥–µ–ª–∞–Ω–æ —Å ‚ù§Ô∏è –∏—Å–ø–æ–ª—å–∑—É—è NiceGUI –∏ Python**

---

### –ü—Ä–∏–º–µ—á–∞–Ω–∏—è –ø–æ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º
- –ì—Ä–∞—Ñ–∏–∫–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç Plotly/Pandas. –ï—Å–ª–∏ –ø–∞–∫–µ—Ç—ã –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã, –≤–∫–ª–∞–¥–∫–∞ "–ì—Ä–∞—Ñ–∏–∫–∏" –±—É–¥–µ—Ç —Å–∫—Ä—ã—Ç–∞ –∏–ª–∏ –ø–æ–∫–∞–∂–µ—Ç –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—é –ø–æ —É—Å—Ç–∞–Ω–æ–≤–∫–µ:
```bash
pip install plotly pandas
```

### –ü–æ–ª–∏—Ç–∏–∫–∞ –≤–µ—Ä—Å–∏–π
- –°–ª–µ–¥—É–µ–º SemVer; –¥–ª—è –º–µ–ª–∫–∏—Ö –ø—Ä–∞–≤–æ–∫ —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç—Å—è –ø–æ—Å–ª–µ–¥–Ω–∏–π —Ä–∞–∑—Ä—è–¥ (patch), –Ω–∞–ø—Ä.: 1.9.16 ‚Üí 1.9.17.

### –°—Ç–∞—Ç—É—Å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
- –°–∏—Å—Ç–µ–º–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ (backend), –≤—Ä–µ–º–µ–Ω–Ω–æ –æ—Ç–∫–ª—é—á–µ–Ω–∞ –≤ UI –¥–ª—è —Å—Ç–∞–±–∏–ª–∏–∑–∞—Ü–∏–∏; –ø–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è –±–µ–∑–æ–ø–∞—Å–Ω–æ–µ –≤–∫–ª—é—á–µ–Ω–∏–µ –≤ 1.9.17.