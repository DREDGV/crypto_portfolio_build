# Бэклог (эпики, user stories, критерии)

## Эпик A: Core (MVP) — P0
- **A1:** CRUD сделок. _AC:_ валидация, запись, уведомления.
- **A2:** Позиции по (coin, strategy) и FIFO. _AC:_ средняя цена, стоимость, реализ./нереализ. PnL.
- **A3:** Экспорт CSV (сделки/позиции). _AC:_ корректные колонки, UTF-8, файлы в `data/exports`.
- **A4:** Фильтры монета/стратегия. _AC:_ влияют на сводку и таблицы, сброс работает.

## Эпик B: Alerts — P0
- **B1:** CRUD `AlertRule` (coin, strategy?, kind, op, threshold, cooldown, active). _AC:_ создать/вкл/выкл/удалить.
- **B2:** Планировщик и анти-дребезг. _AC:_ триггер по пересечению порога; пауза по cooldown.
- **B3:** История + уведомления в UI. _AC:_ таблица событий; всплывашка.

## Эпик C: Analytics — P1
- **C1:** Локальный кэш исторических цен. _AC:_ TTL, фолбэк при офлайне.
- **C2:** Мини-графики стоимости и PnL 7/30д. _AC:_ быстрый рендер.
- **C3:** Дневные снапшоты. _AC:_ задача по расписанию; графики из снапшотов.

## Эпик D: Import CSV — P1
- **D1:** Загрузка → маппинг колонок → предпросмотр (10 строк). _AC:_ понятный UI.
- **D2:** Нормализация чисел/дат; batch-вставка. _AC:_ 5–10k строк стабильно.

## Эпик E: Saved Views — P2
- **E1:** Сохранение/выбор наборов фильтров/колонок. _AC:_ пресеты хранятся локально и восстанавливаются.

## Эпик F: Multi-portfolio — P2
- **F1:** Модель `Portfolio`, миграция, селектор. _AC:_ отчёты разделяются.

## Эпик G: Capital Management — P2
- **G1:** Лестница закупок, конфиг ступеней, подсказки. _AC:_ отрисовка рекомендаций.

## Эпик H: Decimal & Quality — P0
- **H1:** Переход на Decimal + единый форматтер. _AC:_ суммы сходятся.
- **H2:** Тесты FIFO/PNL и адаптера цен. _AC:_ зелёные тесты локально/CI.

## DoD (Definition of Done)
- Фича проверена по happy-path; ошибки обрабатываются.
- Нет регрессий базовой функциональности.
- Документация обновлена (README/CONCEPT/ROADMAP при необходимости).
