# Концепция приложения

## Что это за приложение

Личный помощник для учёта и контроля криптопортфеля. Он хранит все ваши сделки, собирает их в позиции, показывает прибыль/убыток, подсказывает, когда стоит обратить внимание на монету, и помогает быстрее принимать решения — всё локально на вашем компьютере, без платных сервисов и серверов.

## Какую боль решаем

- **«Пропустил прибыль»**: монета уходила в плюс, но вы не заметили — теперь появятся алерты и наглядный PnL.
- **Каша из сделок**: покупки/продажи в разное время и на разных биржах — приложение всё аккуратно собирает в одну позицию.
- **Нет общей картины**: вместо десятка вкладок бирж — один экран «Обзор» с ключевыми цифрами и фильтрами.
- **Импульсивные покупки**: модуль капитала (лестница закупок) поможет оставлять резерв и входить по этапам.

## Для кого

Для частного инвестора/трейдера, кто хочет порядок в сделках, быстрый обзор портфеля и подсказки, но без сложных терминалов и без подписок.

## Главная идея и принцип работы

1. Вы добавляете сделки (покупка, продажа, обмен, ввод/вывод, позже — перевод/стейкинг).
2. Приложение группирует их по монете и стратегии (долгосрок, средний, краткий, скальпинг) и собирает в позиции по правилу FIFO (первым купил — первым продал).
3. Периодически подтягивает текущие цены (бесплатный CoinGecko).
4. На экране «Обзор» показываются стоимость портфеля, нереализованный PnL, реализованный PnL, средняя цена и т.п.
5. Фильтры по монете и стратегии позволяют смотреть только то, что важно сейчас.
6. Алерты (когда включим) напомнят о сильном движении цены или PnL по вашим правилам.

## Ключевые понятия простым языком

- **Сделка** — запись о покупке/продаже/обмене с ценой, количеством, датой и пометкой «стратегия».
- **Позиция** — суммарный результат по монете в рамках одной стратегии (например, все ваши BTC-долгосрок).
- **FIFO** — когда продаёте, списывается «самая старая» покупка. Так честно считается средняя цена и прибыль.
- **Нереализованный PnL** — текущая «бумажная» прибыль/убыток, если продать прямо сейчас.
- **Реализованный PnL** — прибыль/убыток от уже закрытых объёмов (того, что реально было продано).
- **Стратегия** — ваша корзина/горизонт: long, mid, short, scalp. Позже при желании добавим несколько портфелей поверх стратегий (например: «Личный», «Эксперименты»).

## Что внутри (без технических деталей)

- **Хранение данных**: локальная база (SQLite) лежит в папке проекта. Никто, кроме вас, к ней не имеет доступа.
- **Цены**: берём из CoinGecko (короткие запросы, с кэшированием). Если интернет недоступен, цены просто не обновятся.
- **Интерфейс**: простые вкладки —
  - **Обзор** (главные цифры и позиции) 
  - **Позиции** (детальная таблица, экспорт) 
  - **Сделки** (форма добавления, список, редактирование/удаление, экспорт) 
  - **Аналитика/Алерты** (будут развиваться)
- **Экспорт**: выгрузка сделок и позиций в CSV для Excel/Google Sheets.

## Почему у нас «стратегии», а не «один мешок»

Разбивка на долгосрок/средний/краткосрок/скальпинг даёт:

- разную среднюю цену и PnL по подходам;
- разные правила алертов (например, для скальпа пороги одни, для долгосрока — другие);
- чистую аналитику: вы видите, где реально зарабатываете.

При этом мы оставили запас: если со временем захочется, можно добавить мультипортфели и держать, например, «Основной» и «Экспериментальный» отдельно — идеи уже учтены в планах.

## Что уже есть (на сегодня)

- ✅ Добавление/просмотр/редактирование/удаление сделок
- ✅ Автоматический расчёт позиций по FIFO, средняя цена, текущая стоимость
- ✅ Нереализованный и реализованный PnL
- ✅ Фильтры по монете и стратегии
- ✅ Подтяжка текущих цен (CoinGecko)
- ✅ Экспорт в CSV (сделки и позиции)
- ✅ Простая и понятная структура интерфейса

## Что добавим в ближайших итерациях

### Итерация 1 — «пользовательские фичи»
- **Алерты**: правила по цене, % изменения, нереализованному PnL, «анти-дребезг», история срабатываний
- **Аналитика**: мини-графики стоимости портфеля и PnL за 7/30 дней, локальный кэш исторических цен
- **Импорт CSV**: чтобы быстро подтянуть историю из бирж/кошельков
- **Saved Views**: сохранённые наборы фильтров/видов

### Итерация 2 — «структура портфеля»
- **Капитал-менеджмент**: «лестница» закупок, подсказки по входу долями
- **Мультипортфели**: несколько портфелей поверх стратегий

### Итерация 3 — «качество и долговечность»
- **Точность**: переход на Decimal для точных расчётов
- **Резервные копии**: одной кнопкой
- **Портативная сборка**: под Windows

## Как этим пользоваться каждый день

1. **Занёс сделку** (30 секунд)
2. **Заглянул в Обзор**: всё ли ок по ключевым монетам и стратегиям?
3. **Фильтром выбрал** нужную стратегию или монету, оценил PnL и среднюю цену
4. **(С алертами)** получил уведомление, если что-то резко выросло/упало — принял решение
5. **При необходимости** — экспорт для отчёта или заметок

## Ограничения и честные ожидания

- Приложение **не торгует за вас** и не даёт гарантий по рынку — это ваш «пульт управления» и счётчик
- Актуальность PnL зависит от актуальности цен и полноты ваших записей
- Интернет нужен для обновления цен; без него всё работает, но цифры «замрут» до следующего запроса

## Почему это стоит довести до ума

Вы получаете свою рабочую станцию для крипты: быстро, наглядно, локально и бесплатно. Нет зависимости от сторонних кабинетов, нет подписок, нет риска потерять данные «в облаке». При этом функционал растёт вместе с вашими задачами — от простого учёта к продвинутой аналитике и алертам.
